\documentclass[../main.tex]{subfiles}
\chapter{Herleitung}
\label{c:herleitung}

\section[Operatoren]{Operatoren für Transformationen}
\subsection{Translation}
\begin{equation}
	\label{eq:translation}
	T_{\mathbf{v}} \begin{pmatrix}t_x\\t_y\\t_z\end{pmatrix}= \begin{bmatrix}1 & 0 & 0 & t_x\\0 & 1 & 0 & t_y\\0 & 0 & 0 & t_z\\0 & 0 & 0 & 1\end{bmatrix}
\end{equation}

\subsection{Rotation}
\begin{equation}
	\label{eq:rotationsmatrix}
	\begin{split}
		R\begin{pmatrix}\gamma\\\beta\\\alpha\end{pmatrix} = & R_{z}(\alpha )\,R_{y}(\beta )\,R_{x}(\gamma ) \\
		= & \begin{bmatrix}\cos \alpha & -\sin \alpha & 0\\\sin \alpha & \cos \alpha & 0\\0& 0& 1\end{bmatrix} \cdot
			\begin{bmatrix}\cos \beta & 0& \sin \beta \\0& 1& 0\\-\sin \beta & 0& \cos \beta \end{bmatrix} \cdot
			\begin{bmatrix}1& 0& 0\\0& \cos \gamma & -\sin \gamma \\0& \sin \gamma & \cos \gamma \end{bmatrix} \\
		= & \begin{bmatrix}
			\cos \alpha \cos \beta & \cos \alpha \sin \beta \sin \gamma -\sin \alpha \cos \gamma & \cos 	\alpha \sin \beta \cos \gamma +\sin \alpha \sin \gamma \\
			\sin \alpha \cos \beta & \sin \alpha \sin \beta \sin \gamma +\cos \alpha \cos \gamma & \sin \alpha \sin \beta \cos \gamma -\cos \alpha \sin \gamma \\
			-\sin \beta & \cos \beta \sin \gamma & \cos \beta \cos \gamma \\
		\end{bmatrix}
	\end{split}
\end{equation}

Um Matrixoperation zu vereinfachen werden Rotationsmatrizen als homogene Transformationsmatrizen gemäß \ref{eq:homTM} mit einem Nullvektor $\mathbf{p} = \mathbf{0}$ als Verschiebung geschrieben.

\subsection[Transformationsmatrix]{Homogene Transformationsmatrix}
Die Anordnung eines körperfesten Koordinatensystems $\{b\}$ (body-frame) in einem raumfesten Koordinatensystem $\{s\}$ (space-frame) kann beschrieben werden durch die Position des body-frames $p$ in $\{s\}$-Koordinaten und einer Rotationsmatrix $R$, welche die Ausrichtung von $\{b\}$ in $\{s\}$-Koordinaten beschreibt (siehe Abb. \ref{fig:frames}).
Die homogene Transformationsmatrix $\mathbf{T}$ ist die kombinierte Repräsentation von Orientierung und Position als eine Matrix \cite[Ch. 3.3.1]{KevinMLynch2017}:

\begin{equation}
	\label{eq:homTM}
	T = \begin{bmatrix}R & p\\0 & 1\end{bmatrix} = \begin{bmatrix}r_{11} & r_{12} & r_{13} & p_1\\r_{21} & r_{22} & r_{23} & p_2\\r_{31} & r_{32} & r_{33} & p_3\\0 & 0 & 0 & 1\end{bmatrix}
\end{equation}

\section{Inverse von Transformationen}

Die Inverse einer Transformationsmatrix ist ebenfalls eine Transformationsmatrix der Form \cite[Prop. 3.15]{KevinMLynch2017}:
\begin{equation}
	\begin{split}
		\mathbf{T}^{-1} & = \begin{bmatrix}R & p\\0 & 1\end{bmatrix}^{-1}\\
		& = \begin{bmatrix}R^\intercal & -R^\intercal \cdot p\\0 & 1\end{bmatrix}
	\end{split}
\end{equation}

\subsection[Translation]{Inverse der linearen Translation}

Bei einer linearen Translation ist die Rotationsmatrix die Einheitsmatrix.
Daher ergibt sich für die Translationskomponente:

\begin{equation}
	\label{eq:invtrans}
	\begin{split}
		-R^\intercal \cdot p & = (-1) \cdot \begin{bmatrix}1 & 0 & 0\\0 & 1 & 0\\0 & 0 & 1\end{bmatrix}^\intercal \cdot p\\
							 & = \begin{bmatrix}-1 & 0 & 0\\0 & -1 & 0\\0 & 0 & -1\end{bmatrix} \cdot \begin{pmatrix}t_x\\t_y\\t_z\end{pmatrix}\\
							 & = \begin{pmatrix}-t_x\\-t_y\\-t_z\end{pmatrix}
	\end{split}
\end{equation}

Daher ergibt sich für die Inverse der translatorischen Transformationsmatrix.

\begin{equation}
	T^b_s\begin{pmatrix}t_x\\t_y\\t_z\end{pmatrix}^{-1} = T^s_b\begin{pmatrix}-t_x\\-t_y\\-t_z\end{pmatrix}
\end{equation}

\subsection[Rotation]{Inverse der Rotation um eine Achse}

Da bei der reinen Rotationsmatrix der Translationsvektor $p$ der Nullvektor ist, folgt, dass die Translationskomponente der inversen Transformationsmatrix ebenfalls der Nullvektor ist.
\begin{equation}
	\label{eq:inverserot}
	\begin{split}
		-R^\intercal \cdot p & = (-1) \cdot \begin{bmatrix}1 & 0 & 0\\0 & 1 & 0\\0 & 0 & 1\end{bmatrix}^\intercal \cdot \mathbf{0}\\
		& = \begin{bmatrix}-1 & 0 & 0\\0 & -1 & 0\\0 & 0 & -1\end{bmatrix} \cdot \begin{pmatrix}0\\0\\0\end{pmatrix}\\
		& = \begin{pmatrix}0\\0\\0\end{pmatrix}
	\end{split}
\end{equation}

Bei Rotation um eine Achse ergibt sich die Rotationskomponente gemäß \ref{eq:rotationsmatrix} beispielhaft für Rotation um die z-Achse zu:

\begin{equation}
	\begin{split}
		R\begin{pmatrix}0\\0\\\alpha\end{pmatrix} = & R_{z}(\alpha )\,R_{y}(0)\,R_{x}(0) \\
		= & \begin{bmatrix}\cos \alpha & -\sin \alpha & 0\\\sin \alpha & \cos \alpha & 0\\0& 0& 1\end{bmatrix} \cdot
		\begin{bmatrix}\cos 0 & 0& \sin 0 \\0& 1& 0\\-\sin 0 & 0& \cos 0 \end{bmatrix} \cdot
		\begin{bmatrix}1& 0& 0\\0& \cos 0 & -\sin 0 \\0& \sin 0 & \cos 0 \end{bmatrix} \\
		= & \begin{bmatrix}\cos \alpha & -\sin \alpha & 0\\\sin \alpha & \cos \alpha & 0\\0& 0& 1\end{bmatrix}
	\end{split}
\end{equation}

\begin{equation}
	\label{eq:sincossymm}
	\begin{split}
		\sin{-x} = & -\sin{x} \\
		\cos{-x} = & \cos{x}
	\end{split}
\end{equation}

Für die transponierte der Rotationskomponente ergibt sich mit den Symmetriebeziehungen gemäß Gleich. \ref{eq:sincossymm}:

\begin{equation}
	\begin{split}
		R_{z}^\intercal(\alpha) = & \begin{bmatrix}\cos \alpha & -\sin \alpha & 0\\\sin \alpha & \cos \alpha & 0\\0& 0& 1\end{bmatrix}^\intercal \\
		= & \begin{bmatrix}\cos \alpha & \sin \alpha & 0\\-\sin \alpha & \cos \alpha & 0\\0& 0& 1\end{bmatrix} \\
		= & R_{z}(-\alpha)
	\end{split}
\end{equation}

Damit folgt für die Inverse der Transformationsmatrix der reinen Rotation:

\begin{equation}
	R_s^b\begin{pmatrix}0\\0\\\alpha\end{pmatrix}^{-1} = R^s_b\begin{pmatrix}0\\0\\-\alpha\end{pmatrix}
\end{equation}

\subsection{Notation der Indizes}

Um bei einer Transformation zu verdeutlichen aus welchem Koordinatensystem in welches andere Koordinatensystem transformiert wird, werden der Transformationsmatrix Indizes angehängt.

\begin{figure}
	\includegraphics{frames}
	\caption{Transformation von space-frame $\{s\}$ nach body-frame $\{b\}$}
	\label{fig:frames}
\end{figure}

Das Subscript steht dabei für das Ausgangskoordinatensystem, das Superscript steht für die Zielkoordinatensystem.
Die zu Abb. \ref{fig:frames} gehörende Transformationsmatrix lautet also:

\begin{equation}
	T_s^b = \begin{bmatrix}R_s^b & p\\0 & 1\end{bmatrix}
\end{equation}

Bei Invertierung der Transformationsmatrix werden die Indizes getauscht, um zu beschreiben, dass die Transformationsrichtung jetzt vom body-frame $\{b\}$ in das space-frame $\{s\}$ erfolgt.

\section[Maschine]{Kinematik der Maschine}

Im Folgenden wird die Kinematik der Maschine in Abb. \ref{fig:maschine} beschrieben.
Die Kinematik wird für die Betrachtung ausgehend von der Schnittstelle Maschinenbett-Werkstück in zwei Bereiche eingeteilt, für welche jeweils die Koordinatentransformation aufgestellt wird.
Ein Bereich betrachtet auf Seite des Werkzeugs die kinematische Kette der Maschine mit den verfahrbaren Achsen, der zweite auf der Seite des Werkstücks die Position und Verdrehwinkel des Werkstückkoordinatensystems im Maschinenbett.
Um anschließend die Koordinatentransformation von dem Werkzeugkoordinatensystems in das Werkstückkoordinatensystems zu erhalten, werden die beiden Terme gleichgesetzt und nach Werkzeugkoordinaten aufgelöst.

\begin{figure}
	\includegraphics[width=12cm]{maschine_frei}
	\caption{Kinematik der Maschine mit Vorzeichenrichtung der Achsen}
	\label{fig:maschine}
\end{figure}

\subsection[Werkstück]{Kinematik der Werkstück-Seite}

In die kinematische Kette auf der Werkstückseite \ref{eq:werkstuck} gehen ein Offset des Werkstückkoordinatensystems zum Maschinenkoordinatensystem $\mathbf{p}_{\mathtt{offset}} = \begin{pmatrix} a\\b\\c\end{pmatrix}$ und der Verdrehwinkel $C$ ein.
Der Offset erlaubt die Fähigkeit ein versetztes Aufspannen des Werkstücks darzustellen und ist im idealen Fall ein Nullvektor.
Dem Verdrehwinkel wird ein weiterer Offest $\gamma$ aufgeprägt.
Dieser stellt den Fehler des verdrehten Aufspannens dar und erlaubt die Position von Zahn und Zahnlücke des virtuellen Schneckengetriebes zu korrigieren.
$C$ ist außerdem Funktion des Werkzeugwinkels und dem Achsvorschub.
Der Achsvorschub der $C$-Achse ist das Übersetzungsverhältnis des gedachten Schneckengetriebes.

\begin{equation}
	fC_{WSt,rad} = \frac{n_{Schneidreihen}}{n_{Zähne}}
\end{equation}

Die vollständige Formulierung des Werkstückwinkels $C$ lautet:

\begin{equation}
	C = B \cdot{} fC_{WSt,rad} + \gamma
\end{equation}

Die Transformation beschreibt die Position eines Werkstückpunktes im Koordinatensystems des Maschinenbettes.

\begin{equation}
	\label{eq:werkstuck}
	\mathbf{p}_m = T_{\mathbf{v}} \begin{pmatrix}a\\b\\c \end{pmatrix}
			\cdot{} R \begin{pmatrix}0\\0\\C\end{pmatrix}
			\cdot{} \mathbf{p}_{WSt}
\end{equation}



\subsection[Werkzeug]{Kinematik der Werkzeug-Seite}

Die kinematische Kette der Werkzeugseite \ref{eq:werkzeug} beinhaltet die verfahrbaren Achsen der Maschine mit ihrem jeweiligen Freiheitsgrad ein.
Dabei wird dem y-Achsenfreiheitsgrad ein Offset aufgeprägt, mit dem der Bereich des Werkzeuges im Eingriff verschoben werden kann.
Das Werkzeug unterliegt beim Schneiden Verschleiß.
Das Werkzeug ist länger als erforderlich und durch Verschieben des Werkzeugs entlang der y-Achse kann der Verschleiß gleichmäßig auf das Werkzeug verteilt werden.

\begin{equation}
	Y = y + B \cdot fY_{WZ,rad} + Y_{\mathtt{shift}}
\end{equation}

Da der Spanabfall in Drehrichtung des Werkzeugs erfolgen soll ist diese mathematisch negativ einzutragen.
Das Werkzeug hat außerdem ein eigenes Koordinatensystem, bei welchem sich die z-Achse entlang der Drehrichtung des Werkzeuges erstreckt.
Es bietet sich an, die Ausrichtung des Koordinatensystems durch Drehung um $\pi/2$ um die x-Achse zu definieren.
So kann man mit sehr wenig Aufwand das Werkzeug in einem Polarkoordinatensystem anlegen und die Punktewolke in kartesische Koordinaten umrechnen.

\begin{equation}
	\mathbf{p}_{WZ,kart} = \begin{pmatrix}x = & r \cdot{} \cos{\phi}\\
		                                  y = & r \cdot{} \sin{\phi}\\
		                                  z = & h\end{pmatrix}
\end{equation}

\begin{figure}
	\includegraphics{hobspindle_coord}
	\caption{Ausrichtung des Werkzeugkoordinatensystems}
	\label{fig:hobspindle_coord}
\end{figure}

Die Transformation beschreibt die Position eines Werkzeugpunktes im Koordinatensystems des Maschinenbettes.

\begin{equation}
	\label{eq:werkzeug}
	\mathbf{p}_m = T_{\mathbf{v}} \begin{pmatrix}X\\0\\Z\end{pmatrix}
			\cdot{} R \begin{pmatrix}A\\0\\0\end{pmatrix}
			\cdot{} T_{\mathbf{v}} \begin{pmatrix}0\\Y\\0\end{pmatrix}
			\cdot{} R \begin{pmatrix}0\\-B\\0\end{pmatrix}
			\cdot{} R \begin{pmatrix}\pi/2\\0\\0\end{pmatrix}
			\cdot{} \mathbf{p}_{WZ}
\end{equation}

Zur Verdeutlichung, die ausformulierte Form der Transformationsmatrix zur Drehung des Werkzeugkoordinatensystems lautet:

\begin{equation}
	R \begin{pmatrix}\pi/2\\0\\0\end{pmatrix} = \begin{bmatrix}1 & 0 & 0 & 0\\0 & 0 &-1 & 0\\0 & 1 & 0 & 0\\0 & 0 & 0 & 1\end{bmatrix}
\end{equation}


Zur Vereinfachung der entstehenden Terme bietet sich das Zusammenfassen der Transformationsmatrizen zu einer Transformationsmatrix von Maschinenbett- in Werkzeugkoordinaten an:

\begin{equation}
	\mathbf{T}^{WZ}_m = T_{\mathbf{v}} \begin{pmatrix}X\\0\\Z\end{pmatrix}
				\cdot{} R \begin{pmatrix}A\\0\\0\end{pmatrix}
				\cdot{} T_{\mathbf{v}} \begin{pmatrix}0\\Y\\0\end{pmatrix}
				\cdot{} R \begin{pmatrix}0\\-B\\0\end{pmatrix}
				\cdot{} R \begin{pmatrix}\pi/2\\0\\0\end{pmatrix}
\end{equation}


\subsection[Vorschübe]{Aufprägung der Vorschübe auf die Achskoordinaten}

Durch die Natur der Fertigung von Verzahnung vergleichbar mit einem Schneckengetriebe hängen die Vorschübe der Achsen von der Rotation des Werkzeugs ab.
Dazu wird die Abhängigkeit der Achskoordinaten vom Werkzeugwinkel als Produkt des Werkzeugwinkels und einem Vorschubfaktor beschrieben.
Den x-Achsen und z-Achsen Koordinaten wird zusätzlich als linearer Offset die Position der x-Achse von einem Ausgangszustand aufgeprägt.
Bei der C-Achse ist dieser Effekt bereits mit dem Winkeloffset $\gamma$ realisiert.

\subsubitem{x-Axchse}

\begin{equation}
	X = x + B \cdot fX_{WZ,rad}
\end{equation}

\subsubitem{z-Axchse}

\begin{equation}
	Z = z + B \cdot fZ_{WZ,rad}
\end{equation}

\subsubitem{C-Axchse}

\begin{equation}
	C = B \cdot fC_{WSt,rad}
\end{equation}

Damit ergibt sich für die Transformationsmatrix von Maschinenbett- nach Werkzeugkoordinaten in ausführlicher Form:

\begin{equation}
	\mathbf{T}^{WZ}_m = T_{\mathbf{v}} \begin{pmatrix}x + B \cdot fX_{WZ,rad}\\0\\z + B \cdot fZ_{WZ,rad}\end{pmatrix}
				\cdot{} R \begin{pmatrix}A\\0\\0\end{pmatrix}
				\cdot{} T_{\mathbf{v}} \begin{pmatrix}0\\y + B \cdot fY_{WZ,rad} + Y_{\mathtt{shift}}\\0\end{pmatrix}
				\cdot{} R \begin{pmatrix}0\\-B\\0\end{pmatrix}
				\cdot{} R \begin{pmatrix}\pi/2\\0\\0\end{pmatrix}
\end{equation}

\subsection[Gesamt]{Transformation von Werkzeug- in Werkstückkoordinaten}

Um die Transformation aus dem Werkzeug- in das Werkstückkoordinatensystem zu erhalten setzen wir die beiden Transformationsschritte gleich:

\begin{equation}
			T_{\mathbf{v}} \begin{pmatrix}a\\b\\c\end{pmatrix}
	\cdot{} R \begin{pmatrix}0\\0\\C\end{pmatrix}
	\cdot{} \mathbf{p}_{WSt} =
			T_{\mathbf{v}} \begin{pmatrix}X\\0\\Z\end{pmatrix}
	\cdot{} R \begin{pmatrix}A\\0\\0\end{pmatrix}
	\cdot{} T_{\mathbf{v}} \begin{pmatrix}0\\Y\\0\end{pmatrix}
	\cdot{} R \begin{pmatrix}0\\-B\\0\end{pmatrix}
	\cdot{} \mathbf{p}_{WZ}
\end{equation}

Die Gleichung wird durch Multiplikation mit den Inversen der Transformation- und Rotationsmatrix aufgelöst, sodass die Beschreibung der Transformation von Werkzeug- in Werkstückkoordinaten entsteht.

\begin{equation}
	\begin{split}
				R \begin{pmatrix} 0 \\ 0 \\ -C \end{pmatrix}
		\cdot{} T_{\mathbf{v}} \begin{pmatrix} -a \\ -b \\ -c \end{pmatrix}
		\cdot{} T_{\mathbf{v}} \begin{pmatrix} X \\ 0 \\ Z \end{pmatrix}
		\cdot{} R \begin{pmatrix} A \\ 0 \\ 0 \end{pmatrix}
		\cdot{} T_{\mathbf{v}} \begin{pmatrix} 0 \\ Y \\ 0 \end{pmatrix}
		\cdot{} R \begin{pmatrix} 0 \\ -B \\ 0 \end{pmatrix}
		\cdot{} \mathbf{p}_{WZ} & =
				\mathbf{p}_{WSt}
		\\
				\mathbf{T}^{WZ}_{WSt}
		\cdot{} \mathbf{p}_{WZ} & =
	\end{split}
\end{equation}

\begin{equation}
	\begin{split}
		\mathbf{T}^{WZ}_{WSt} = &
				R \begin{pmatrix} 0 \\ 0 \\ -C \end{pmatrix}
		\cdot{} T_{\mathbf{v}} \begin{pmatrix} -a \\ -b \\ -c \end{pmatrix}
		\cdot{} T_{\mathbf{v}} \begin{pmatrix} X \\ 0 \\ Z \end{pmatrix}
		\cdot{} R \begin{pmatrix} A \\ 0 \\ 0 \end{pmatrix}
		\cdot{} T_{\mathbf{v}} \begin{pmatrix} 0 \\ Y \\ 0 \end{pmatrix}
		\cdot{} R \begin{pmatrix} 0 \\ -B \\ 0 \end{pmatrix}
		\cdot{} R \begin{pmatrix}\pi/2\\0\\0\end{pmatrix}
		\\= &
				R \begin{pmatrix} 0 \\ 0 \\ -C \end{pmatrix}
		\cdot{} T_{\mathbf{v}} \begin{pmatrix} X - a \\ -b \\ Z - c \end{pmatrix}
		\cdot{} R \begin{pmatrix} A \\ 0 \\ 0 \end{pmatrix}
		\cdot{} T_{\mathbf{v}} \begin{pmatrix} 0 \\ Y \\ 0 \end{pmatrix}
		\cdot{} R \begin{pmatrix} 0 \\ -B \\ 0 \end{pmatrix}
		\cdot{} R \begin{pmatrix}\pi/2\\0\\0\end{pmatrix}
		\\= &
				R \begin{pmatrix} 0 \\ 0 \\ -(B \cdot{} fC_{WSt,rad} + \gamma) \end{pmatrix}
		\cdot{} T_{\mathbf{v}} \begin{pmatrix}	x + B \cdot fX_{WZ,rad} -a\\
																		-b\\
												z + B \cdot fZ_{WZ,rad} -c	\end{pmatrix}
		\cdot{} R \begin{pmatrix} A \\ 0 \\ 0 \end{pmatrix}
		\cdot{} T_{\mathbf{v}} \begin{pmatrix}												0 \\
												y + B \cdot fY_{WZ,rad} + Y_{\mathtt{shift}} \\
																							0 \end{pmatrix}
		\cdot{} R \begin{pmatrix} 0 \\ -B \\ 0 \end{pmatrix}
		\cdot{} R \begin{pmatrix}\pi/2\\0\\0\end{pmatrix}
		\\= &
		\begin{bmatrix}
			\sigma_2 \cdot \cos{B} + \sigma_1 \cdot \sin{A} \cdot \sin{B} & -\sigma_1 \cdot \cos{A} &  \sigma_1 \cdot \cos{B} \cdot \sin{A} - \sigma_2 \cdot \sin{B} & \sigma_2 \cdot \sigma_3 +\sigma_1 \cdot \sigma_4 \\
			\sigma_1 \cdot \cos{B} - \sigma_2 \cdot \sin{A} \cdot \sin{B} &  \sigma_2 \cdot \cos{A} & -\sigma_2 \cdot \cos{B} \cdot \sin{A} - \sigma_1 \cdot \sin{B} & \sigma_1 \cdot \sigma_3 -\sigma_2 \cdot \sigma_4 \\
			\cos{A} \cdot \sin{B} & \sin{A} & \cos{A} \cdot \cos{B} & Z-c+B \cdot fZ_{WZ,rad} +\sin{A} \cdot \sigma_5 \\
			0 & 0 & 0 & 1 \end{bmatrix}
	\end{split}
\end{equation}

Zur Vereinfachung der mathematischen Notation wird der Transformationsmatrix $\mathbf{T}^{WZ}_{WSt}$ eine charakteristische Bezeichnung gegeben.
$\mathbf{G}$ steht hierbei für \textit{Gesamt}.

\begin{equation}
	\mathbf{T}^{WZ}_{WSt} = \mathbf{G}
\end{equation}

Es folgt für die Beschreibung eines Punktes mit Werkzeugkoordinaten in Maschinenkoordinaten:

\begin{equation}
	\mathbf{p}_{Wst} = \mathbf{G} \cdot{} \mathbf{p}_{WZ}
\end{equation}

\section[Lösung]{Lösung der relevanten Gleichung}

Bei dem gewählten Lösungsverfahren des Problems soll der Werkzeugwinkel in Abhängigkeit von einer vorgegebenen Höhe eines Werkzeugpunktes in z-Richtung bestimmt werden.
Es gilt die Formel zu lösen die sich bei Anwendung der allgemeinen Transformationsmatrix auf einen Werkzeugpunkt in der z-Komponente des Ergebnisses ergibt.

\begin{equation}
		\begin{pmatrix}p_{Wst,x}\\p_{Wst,y}\\p_{Wst,z}\\1\end{pmatrix} = \mathbf{G} \cdot{} \begin{pmatrix}p_{WZ,x}\\p_{WZ,y}\\p_{WZ,z}\\1\end{pmatrix}
\end{equation}

Damit sieht die zu lösende Gleichung folgendermaßen aus:
\begin{equation}
	\begin{split}
		p_{Wst,z} = & Z - c + B \cdot{} fZ_{WZrad} + \sin(A) \cdot{} (Y + Y_{shift} + B \cdot{} fY_{WZrad}) + h_{WZ} \cdot{} \sin(A) \\
				  + & r_{WZ} \cdot{} \cos(A) \cdot{} \cos(B) \cdot{} \sin(\phi_{WZ}) + r_{WZ} \cdot{} cos(A) \cdot{} \sin(B) \cdot{} \cos(\phi_{WZ})
	\end{split}
\end{equation}

Die Lösung der Gleichung soll für einen vorgebenen Wert in z-Richung erfolgen.
\begin{equation}
	\begin{split}
		z_{soll} = & Z - c + B \cdot{} fZ_{WZrad} + \sin(A) \cdot{} (Y + Y_{shift} + B \cdot{} fY_{WZrad}) + h_{WZ} \cdot{} \sin(A) \\
				 + & r_{WZ} \cdot{} \cos(A) \cdot{} \cos(B) \cdot{} \sin(\phi_{WZ}) + r_{WZ} \cdot{} cos(A) \cdot{} \sin(B) \cdot{} \cos(\phi_{WZ})
	\end{split}
\end{equation}

Da Lösung der Gleichung durch Finden des Nullpunktes erfolgen soll, muss die Gleichung nach dem Werkzeugwinkel $B$ aufgelöst werden.
\begin{equation}
	\begin{split}
		0 = & Z - c -z_{soll} + B \cdot{} fZ_{WZrad} + \sin(A) \cdot{} (Y + Y_{shift} + B \cdot{} fY_{WZrad}) + h_{WZ} \cdot{} \sin(A) \\
		  + & r_{WZ} \cdot{} \cos(A) \cdot{} \cos(B) \cdot{} \sin(\phi_{WZ}) + r_{WZ} \cdot{} cos(A) \cdot{} \sin(B) \cdot{} \cos(\phi_{WZ})
	\end{split}
\end{equation}

\begin{equation}
	\label{eq:additionsterm}
	\sin(x_1 \pm x_2) = \sin(x_1) \cdot{} \cos(x_2) \pm \cos(x_1) \cdot{} \sin(x_2)
\end{equation}

Gemäß dem Additionsterm \ref{eq:additionsterm} aus \cite[Gleich. 7.6.1]{Papula2017} können die $\sin$- und $\cos$-Terme nach $r_{WZ} \cdot{} cos(A)$ zusammengefasst werden.

\begin{equation}
	\begin{split}
	0 =  & Z - c  - z_{soll} + B \cdot{} fZ_{WZrad} + \sin(A) \cdot{} (Y + Y_{shift} + B \cdot{} fY_{WZrad}) + h_{WZ} \cdot{} \sin(A) \\
	   + & r_{WZ} \cdot{} \cos(A) \cdot{} \sin(B + \phi_{WZ})
	\end{split}
\end{equation}

\begin{equation}
	\begin{split}
	-r_{WZ} \cdot{} \cos(A) \cdot{} \sin(B + \phi_{WZ}) = & Z - c  - z_{soll} + B \cdot{} fZ_{WZrad} \\
														+ & \sin(A) \cdot{} (Y + Y_{shift} + B \cdot{} fY_{WZrad}) + h_{WZ} \cdot{} \sin(A)
	\end{split}
\end{equation}

\begin{equation}
	\sin(B + \phi_{WZ}) = -\frac{Z - c  - z_{soll} + B \cdot{} fZ_{WZrad} + \sin(A) \cdot{} (Y + Y_{shift} + B \cdot{} fY_{WZrad}) + h_{WZ} \cdot{} \sin(A)}{r_{WZ} \cdot{} \cos(A)}
\end{equation}
\begin{equation}
	B + \phi_{WZ} = \arcsin{\left(-\frac{Z - c  - z_{soll} + B \cdot{} fZ_{WZrad} + \sin(A) \cdot{} (Y + Y_{shift} + B \cdot{} fY_{WZrad}) + h_{WZ} \cdot{} \sin(A)}{r_{WZ} \cdot{} \cos(A)}\right)}
\end{equation}

\begin{equation}
	\label{eq:arcsinpunktsymm}
	\arcsin{-x} = -\arcsin{x}
\end{equation}

Wegen der Punktsymmetrie des Arkussinus \ref{eq:arcsinpunktsymm} ergibt sich:
\begin{equation}
	B = -\phi_{WZ} -\arcsin{\left(\frac{Z - c  - z_{soll} + B \cdot{} fZ_{WZrad} + \sin(A) \cdot{} (Y + Y_{shift} + B \cdot{} fY_{WZrad}) + h_{WZ} \cdot{} \sin(A)}{r_{WZ} \cdot{} \cos(A)}\right)}
\end{equation}


Lösung:
\begin{equation}
	B= \phi_{WZ} + \pi + \arcsin{\left(\dfrac{Z - c - z_{soll} + B_0 \cdot{} fZ_{WZrad} + \sin(A) \cdot{} (Y + Y_{shift} + B_0 \cdot{} fY_{WZrad}) + h_{WZ} \cdot{} \sin(A)}{r_{WZ} \cdot{} \cos(A)}\right)}
\end{equation}
